// this should be 3, 5 or 7
const size = 3;

const optimezeLevel = 0;

// 0 ~ 100
const debug = 0;

const images = {
  3: {
    push: { file: 'piet/3x3/push1.png' },
    push2: { file: 'piet/3x3/push2.png' },
    push3: { file: 'piet/3x3/push3.png' },
    pop: { file: 'piet/3x3/pop.png' },
    add: { file: 'piet/3x3/add.png' },
    sub: { file: 'piet/3x3/sub.png' },
    mul: { file: 'piet/3x3/mul.png' },
    div: { file: 'piet/3x3/div.png' },
    mod: { file: 'piet/3x3/mod.png' },
    not: { file: 'piet/3x3/not.png' },
    greater: { file: 'piet/3x3/great.png' },
    dup: { file: 'piet/3x3/dup.png' },
    roll: { file: 'piet/3x3/roll.png' },
    in_n: { file: 'piet/3x3/in_n.png' },
    in_c: { file: 'piet/3x3/in_c.png' },
    out_n: { file: 'piet/3x3/out_n.png' },
    out_c: { file: 'piet/3x3/out_c.png' },
    nop_h: { file: 'piet/3x3/nop_h.png' },
    nop_v: { file: 'piet/3x3/nop_v.png' },
    cross: { file: 'piet/3x3/cross.png' },
    curve: { file: 'piet/3x3/curve1.png' },
    join: { file: 'piet/3x3/join.png' },
    branch: { file: 'piet/3x3/branch.png' },
    start: { file: 'piet/3x3/start.png' },
    terminate: { file: 'piet/3x3/terminate.png' },
    black: { file: 'piet/3x3/black.png' },
    curve1: { file: 'piet/3x3/curve1.png' },
    curve2: { file: 'piet/3x3/curve2.png' },
    curve4: { file: 'piet/3x3/curve4.png' },
    curve5: { file: 'piet/3x3/curve5.png' },
    curve6: { file: 'piet/3x3/curve6.png' },
    curve7: { file: 'piet/3x3/curve7.png' },
    rjoin: { file: 'piet/3x3/rjoin.png' },
    ljoin: { file: 'piet/3x3/ljoin.png' },
  },
  5: {
    push: { file: 'piet/5x5/push1.png' },
    push0: { file: 'piet/5x5/push0.png' },
    push2: { file: 'piet/5x5/push2.png' },
    push3: { file: 'piet/5x5/push3.png' },
    push4: { file: 'piet/5x5/push4.png' },
    pop: { file: 'piet/5x5/pop.png' },
    add: { file: 'piet/5x5/add.png' },
    sub: { file: 'piet/5x5/sub.png' },
    mul: { file: 'piet/5x5/mul.png' },
    div: { file: 'piet/5x5/div.png' },
    mod: { file: 'piet/5x5/mod.png' },
    not: { file: 'piet/5x5/not.png' },
    greater: { file: 'piet/5x5/great.png' },
    dup: { file: 'piet/5x5/dup.png' },
    dupadd: { file: 'piet/5x5/dupadd.png' },
    dupmul: { file: 'piet/5x5/dupmul.png' },
    roll: { file: 'piet/5x5/roll.png' },
    in_n: { file: 'piet/5x5/in_n.png' },
    in_c: { file: 'piet/5x5/in_c.png' },
    out_n: { file: 'piet/5x5/out_n.png' },
    out_c: { file: 'piet/5x5/out_c.png' },
    nop_h: { file: 'piet/5x5/nop_h.png' },
    nop_v: { file: 'piet/5x5/nop_v.png' },
    cross: { file: 'piet/5x5/cross.png' },
    curve: { file: 'piet/5x5/curve1.png' },
    join: { file: 'piet/5x5/join.png' },
    branch: { file: 'piet/5x5/branch.png' },
    start: { file: 'piet/5x5/start.png' },
    terminate: { file: 'piet/5x5/terminate.png' },
    black: { file: 'piet/5x5/black.png' },
    curve1: { file: 'piet/5x5/curve1.png' },
    curve2: { file: 'piet/5x5/curve2.png' },
    curve4: { file: 'piet/5x5/curve4.png' },
    curve5: { file: 'piet/5x5/curve5.png' },
    curve6: { file: 'piet/5x5/curve6.png' },
    curve7: { file: 'piet/5x5/curve7.png' },
    rjoin: { file: 'piet/5x5/rjoin.png' },
    ljoin: { file: 'piet/5x5/ljoin.png' },
  },
  7: {
    push: { file: 'piet/7x7/push1.png' },
    push0: { file: 'piet/7x7/push0.png' },
    push2: { file: 'piet/7x7/push2.png' },
    push3: { file: 'piet/7x7/push3.png' },
    push4: { file: 'piet/7x7/push4.png' },
    push16: { file: 'piet/7x7/push16.png' },
    push32: { file: 'piet/7x7/push32.png' },
    pop: { file: 'piet/7x7/pop.png' },
    add: { file: 'piet/7x7/add.png' },
    sub: { file: 'piet/7x7/sub.png' },
    mul: { file: 'piet/7x7/mul.png' },
    div: { file: 'piet/7x7/div.png' },
    mod: { file: 'piet/7x7/mod.png' },
    not: { file: 'piet/7x7/not.png' },
    greater: { file: 'piet/7x7/great.png' },
    dup: { file: 'piet/7x7/dup.png' },
    dupadd: { file: 'piet/7x7/dupadd.png' },
    dupmul: { file: 'piet/7x7/dupmul.png' },
    roll: { file: 'piet/7x7/roll.png' },
    in_n: { file: 'piet/7x7/in_n.png' },
    in_c: { file: 'piet/7x7/in_c.png' },
    out_n: { file: 'piet/7x7/out_n.png' },
    out_c: { file: 'piet/7x7/out_c.png' },
    nop_h: { file: 'piet/7x7/nop_h.png' },
    nop_v: { file: 'piet/7x7/nop_v.png' },
    cross: { file: 'piet/7x7/cross.png' },
    curve: { file: 'piet/7x7/curve1.png' },
    join: { file: 'piet/7x7/join.png' },
    branch: { file: 'piet/7x7/branch.png' },
    notbranch: { file: 'piet/7x7/notbranch.png' },
    start: { file: 'piet/7x7/start.png' },
    terminate: { file: 'piet/7x7/terminate.png' },
    black: { file: 'piet/7x7/black.png' },
    curve1: { file: 'piet/7x7/curve1.png' },
    curve2: { file: 'piet/7x7/curve2.png' },
    curve4: { file: 'piet/7x7/curve4.png' },
    curve5: { file: 'piet/7x7/curve5.png' },
    curve6: { file: 'piet/7x7/curve6.png' },
    curve7: { file: 'piet/7x7/curve7.png' },
    rjoin: { file: 'piet/7x7/rjoin.png' },
    ljoin: { file: 'piet/7x7/ljoin.png' },
    swap: { file: 'piet/7x7/swap.png' },
  },
};

const opTable = {
  0: { filename: 'push', toRight: true },
  1: { filename: 'pop', toRight: true },
  2: { filename: 'add', toRight: true },
  3: { filename: 'sub', toRight: true },
  4: { filename: 'mul', toRight: true },
  5: { filename: 'div', toRight: true },
  6: { filename: 'mod', toRight: true },
  7: { filename: 'not', toRight: true },
  8: { filename: 'greater', toRight: true },
  9: { filename: 'dup', toRight: true },
  10: { filename: 'roll', toRight: true },
  15: { filename: 'in_n', toRight: true },
  16: { filename: 'in_c', toRight: true },
  17: { filename: 'out_n', toRight: true },
  18: { filename: 'out_c', toRight: true },
  19: { filename: 'start', toRight: true },
  20: { filename: 'terminate', toRight: false },
  21: { filename: 'jez', toRight: true }, // image not exists
  22: { filename: 'label', toRight: true }, // image not exists
  23: { filename: 'jmp', toRight: false }, // image not exists

  24: { filename: 'black', toRight: false }, // only use generate
  25: { filename: 'branch', toRight: true },
  26: { filename: 'nop_h', toRight: true },
  27: { filename: 'nop_v', toRight: false },
  28: { filename: 'curve5', toRight: false }, // 上から左
  29: { filename: 'curve6', toRight: false }, // 右から上
  30: { filename: 'curve4', toRight: true }, // 上から右
  31: { filename: 'curve7', toRight: false }, // 左から上
  32: { filename: 'cross', toRight: true },
  33: { filename: 'join', toRight: true },
  34: { filename: 'rjoin', toRight: true },
  35: { filename: 'ljoin', toRight: false },
  36: { filename: 'curve1', toRight: false }, // 左から下
  37: { filename: 'curve2', toRight: true }, // 下から右

  40: { filename: 'push0', toRight: true },
  41: { filename: 'push2', toRight: true },
  42: { filename: 'push3', toRight: true },
  43: { filename: 'push4', toRight: true },
  50: { filename: 'push16', toRight: true },
  51: { filename: 'push32', toRight: true },

  65: { filename: 'dupadd', toRight: true },
  66: { filename: 'dupmul', toRight: true },
  67: { filename: 'notbranch', toRight: true },
  68: { filename: 'swap', toRight: true },
};

const OP = {
  push: 0,
  pop: 1,
  add: 2,
  sub: 3,
  mul: 4,
  div: 5,
  mod: 6,
  not: 7,
  greater: 8,
  dup: 9,
  roll: 10,
  in_n: 15,
  in_c: 16,
  out_n: 17,
  out_c: 18,
  start: 19,
  terminate: 20,
  jez: 21,
  label: 22,
  jmp: 23,
  black: 24,
  branch: 25,
  nop_h: 26,
  nop_v: 27,
  up2left: 28,
  right2up: 29,
  up2right: 30,
  left2up: 31,
  cross: 32,
  join: 33,
  rjoin: 34,
  ljoin: 35,
  left2down: 36,
  down2right: 37,
  push0: 40,
  push2: 41,
  push3: 42,
  push4: 43,
  push16: 50,
  push32: 51,
  dupadd: 65,
  dupmul: 66,
  notbranch: 67,
  swap: 68,
};

const push = OP.push;
const push2 = OP.push2;
const push3 = OP.push3;
const dup = OP.dup;
const add = OP.add;
const sub = OP.sub;
const mul = OP.mul;
const div = OP.div;

const opPushTable = {
  3: {
    0: [push, OP.not],
    1: [push],
    2: [push2],
    3: [push3],
    4: [push2, dup, add],
    5: [push2, push3, add],
    6: [push3, dup, add],
    7: [push3, dup, push, add, add],
    8: [push2, dup, dup, mul, mul],
    9: [push3, dup, mul],
    10: [push3, dup, mul, push, add],
    11: [push3, dup, mul, push2, add],
    12: [push3, dup, push, add, mul],
    13: [push3, dup, push, add, mul, push, add],
    14: [push3, dup, push, add, add, dup, add],
    15: [push3, dup, push2, add, mul],
    16: [push2, dup, add, dup, mul],
    17: [push2, dup, add, dup, mul, push, add],
    18: [push3, dup, dup, add, mul],
    19: [push3, dup, push, add, dup, mul, add],
    20: [push2, dup, add, dup, push, add, mul],
    21: [push3, dup, dup, push, add, add, mul],
    22: [push3, dup, mul, push2, add, dup, add],
    23: [push3, push2, add, dup, mul, push2, sub],
    24: [push3, dup, push, add, dup, add, mul],
    25: [push3, push2, add, dup, mul],
    26: [push3, dup, dup, mul, mul, push, sub],
    27: [push3, dup, dup, mul, mul],
    28: [push3, dup, dup, mul, mul, push, add],
    29: [push3, dup, dup, mul, mul, push2, add],
    30: [push3, dup, dup, dup, mul, mul, add],
    31: [push2, dup, dup, add, dup, mul, mul, push, sub],
    32: [push2, dup, dup, add, dup, mul, mul],
    33: [push3, dup, dup, mul, push2, add, mul],
    34: [push3, dup, add, dup, mul, push2, sub],
    35: [push3, dup, add, dup, mul, push, sub],
    36: [push3, dup, add, dup, mul],
    37: [push3, dup, add, dup, mul, push, add],
    38: [push3, dup, add, dup, mul, push2, add],
    39: [push3, dup, dup, add, dup, mul, add],
    40: [push3, dup, mul, dup, mul, push2, div],
    41: [push3, dup, add, dup, push, add, mul, push, sub],
    42: [push3, dup, add, dup, push, add, mul],
    43: [push3, dup, add, dup, push, add, mul, push, add],
    44: [push3, dup, dup, push2, add, mul, mul, push, sub],
    45: [push3, dup, dup, push2, add, mul, mul],
    46: [push3, dup, push, add, dup, mul, mul, push2, sub],
    47: [push3, dup, push, add, dup, mul, mul, push, sub],
    48: [push3, dup, push, add, dup, mul, mul],
    49: [push3, dup, push, add, add, dup, mul],
    50: [push3, push2, add, dup, dup, add, mul],
    51: [push3, dup, push, add, dup, mul, push, add, mul],
    52: [push3, dup, dup, push, add, add, dup, mul, add],
    53: [push3, dup, dup, dup, add, mul, mul, push, sub],
    54: [push3, dup, dup, dup, add, mul, mul],
    55: [push3, dup, dup, dup, add, mul, mul, push, add],
    56: [push2, dup, dup, add, mul, dup, push, sub, mul],
    57: [push3, dup, dup, push, add, dup, mul, add, mul],
    58: [push3, dup, dup, mul, mul, push2, add, dup, add],
    59: [push2, dup, add, dup, dup, mul, push, sub, mul, push, sub],
    60: [push2, dup, add, dup, dup, mul, push, sub, mul],
    61: [push2, dup, dup, add, mul, dup, mul, push3, sub],
    62: [push2, dup, dup, add, mul, dup, mul, push2, sub],
    63: [push3, dup, mul, dup, push2, sub, mul],
    64: [push2, dup, dup, add, mul, dup, mul],
    65: [push2, dup, dup, add, mul, dup, mul, push, add],
    66: [push2, dup, dup, dup, add, mul, dup, mul, add],
    67: [push3, dup, push, add, dup, dup, mul, mul, add],
    68: [push2, dup, add, dup, dup, dup, mul, mul, add],
    69: [push2, dup, add, dup, dup, dup, mul, mul, push, add, add],
    70: [push3, dup, add, dup, mul, push, sub, dup, add],
    71: [push3, dup, add, dup, dup, add, mul, push, sub],
    72: [push3, dup, add, dup, dup, add, mul],
    73: [push3, dup, add, dup, dup, add, mul, push, add],
    74: [push3, dup, add, dup, mul, push, add, dup, add],
    75: [push3, dup, push2, add, dup, mul, mul],
    76: [push3, dup, push2, add, dup, mul, mul, push, add],
    77: [push3, dup, mul, dup, mul, push2, dup, add, sub],
    78: [push3, dup, dup, dup, mul, mul, push, sub, mul],
    79: [push3, dup, mul, dup, mul, push2, sub],
    80: [push3, dup, mul, dup, mul, push, sub],
    81: [push3, dup, mul, dup, mul],
    82: [push3, dup, mul, dup, mul, push, add],
    83: [push3, dup, mul, dup, mul, push2, add],
    84: [push3, dup, dup, mul, dup, mul, add],
    85: [push3, dup, dup, mul, dup, mul, push, add, add],
    86: [push3, dup, dup, mul, dup, mul, push2, add, add],
    87: [push3, dup, dup, dup, mul, dup, mul, add, add],
    88: [push3, dup, mul, dup, push, add, mul, push2, sub],
    89: [push3, dup, mul, dup, push, add, mul, push, sub],
    90: [push3, dup, mul, dup, push, add, mul],
    91: [push3, dup, mul, dup, push, add, mul, push, add],
    92: [push3, dup, mul, dup, push, add, mul, push2, add],
    93: [push3, dup, dup, mul, dup, push, add, mul, add],
    94: [push3, dup, push, add, dup, mul, mul, push, sub, dup, add],
    95: [push3, dup, push, add, dup, dup, add, mul, mul, push, sub],
    96: [push3, dup, push, add, dup, dup, add, mul, mul],
    97: [push3, dup, push, add, dup, dup, add, mul, mul, push, add],
    98: [push3, dup, push, add, add, dup, dup, add, mul],
    99: [push3, dup, mul, dup, push2, add, mul],
    100: [push3, dup, mul, push, add, dup, mul],
    101: [push3, dup, mul, push, add, dup, mul, push, add],
    102: [push3, dup, dup, add, dup, mul, push2, sub, mul],
    103: [push3, dup, dup, mul, push, add, dup, mul, add],
    104: [push2, dup, add, dup, push, add, dup, add, dup, mul, add],
    105: [push3, dup, dup, add, dup, mul, push, sub, mul],
    106: [push3, dup, dup, add, dup, mul, mul, push2, sub],
    107: [push3, dup, dup, add, dup, mul, mul, push, sub],
    108: [push3, dup, dup, add, dup, mul, mul],
    109: [push3, dup, dup, add, dup, mul, mul, push, add],
    110: [push3, dup, mul, push, add, dup, push, add, mul],
    111: [push3, dup, dup, dup, add, dup, mul, mul, add],
    112: [push2, dup, dup, dup, add, mul, dup, push, sub, mul, mul],
    113: [push3, dup, dup, mul, push, add, dup, push, add, mul, add],
    114: [push3, dup, dup, add, dup, mul, push2, add, mul],
    115: [push3, push2, add, dup, dup, mul, push2, sub, mul],
    116: [push2, dup, add, dup, dup, push, add, dup, mul, add, mul],
    117: [push3, dup, dup, dup, add, dup, mul, add, mul],
    118: [push3, dup, dup, dup, add, dup, mul, add, mul, push, add],
    119: [push3, dup, mul, push2, add, dup, mul, push2, sub],
    120: [push3, push2, add, dup, dup, mul, push, sub, mul],
    121: [push3, dup, mul, push2, add, dup, mul],
    122: [push3, dup, mul, push2, add, dup, mul, push, add],
    123: [push2, dup, push3, dup, mul, add, dup, mul, add],
    124: [push3, push2, add, dup, dup, mul, mul, push, sub],
    125: [push3, push2, add, dup, dup, mul, mul],
    126: [push3, dup, dup, add, dup, push, add, mul, mul],
    127: [push2, dup, push3, add, dup, dup, mul, mul, add],
    128: [push2, dup, dup, dup, add, mul, dup, mul, mul],
  },
};

module.exports = {
  images,
  unit: size,
  level: optimezeLevel,
  debug,
  OP,
  opTable,
  opPushTable,
};
